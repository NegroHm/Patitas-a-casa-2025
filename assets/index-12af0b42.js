import{r as u,j as e,m as C,n as b,I as S,d as N,o as v}from"./index-b0f687fe.js";import{e as g}from"./index-6e565b34.js";g.init("your_public_key_here");const q=async t=>{const l=t.type_search==="LOST"?"PERDIDO":"ENCONTRADO",a=t.type==="DOG"?"Perro":"Gato",i=t.size==="SMALL"?"Pequeño":t.size==="MEDIUM"?"Mediano":"Grande",d=`
NUEVO REPORTE DE MASCOTA ${l}

Tipo de reporte: ${l}
${t.name?`Nombre: ${t.name}`:""}
Color: ${t.color}
Especie: ${a}
Tamaño: ${i}
Departamento: ${t.city}
Dirección: ${t.address}
Contacto: ${t.contact}
Fecha: ${t.loss_date?new Date(t.loss_date).toLocaleDateString():""}
Descripción: ${t.description}
${t.image_url?`Imagen: ${t.image_url}`:""}

---
Enviado desde Patitas a Casa - Sistema de Reportes MVP
  `,m={to_email:"patitasacasaorg@gmail.com",subject:`Reporte de mascota ${t.type_search==="LOST"?"perdida":"encontrada"}`,message:d,from_name:t.contact,reply_to:t.contact};try{const n=await g.send("your_service_id_here","your_template_id_here",m,"your_public_key_here");return console.log("Email sent successfully:",n),{success:!0,response:n}}catch(n){throw console.error("EmailJS error:",n),n}},E="_formContainer_oq7av_10",F="_form_oq7av_10",T="_headerForm_oq7av_24",w="_tabsContainer_oq7av_37",$="_pet_oq7av_46",L="_petSelected_oq7av_62",R="_mainForm_oq7av_78",O="_imageSection_oq7av_85",P="_buttonFile_oq7av_95",M="_uploaded_oq7av_116",z="_form_inputs_oq7av_125",A="_row_oq7av_147",I="_descriptionSection_oq7av_153",D="_charLimit_oq7av_181",G="_submitButton_oq7av_187",o={"report-container":"_report-container_oq7av_1",formContainer:E,form:F,headerForm:T,tabsContainer:w,pet:$,petSelected:L,mainForm:R,imageSection:O,buttonFile:P,uploaded:M,form_inputs:z,row:A,descriptionSection:I,charLimit:D,submitButton:G},U=()=>{const[t,l]=u.useState(!0),[a,i]=u.useState({}),[d,m]=u.useState(!1),[n,x]=u.useState(!1);u.useEffect(()=>{i(t?{name:"",color:"",size:"",city:"",address:"",contact:"",loss_date:"",description:"",type:"",type_search:"LOST",image_url:null}:{color:"",size:"",city:"",address:"",contact:"",loss_date:"",description:"",type:"",type_search:"FOUND",image_url:null})},[t]);const s=p=>{const{name:r,value:c}=p.target;if(r!=="image_url"){const _=r==="loss_date"?`${c}T23:39:49.000000Z`:c;i(h=>({...h,[r]:_}))}},y=async p=>{const r=p.target.files[0];if(r===null){console.log("No se ha seleccionado ninguna imagen");return}const c=new FormData;c.append("file",r),c.append("upload_preset","aqeczzrt");try{const h=(await N.post("https://api.cloudinary.com/v1_1/dlfwgaprv/image/upload",c)).data.secure_url;i(f=>({...f,image_url:h})),m(!0)}catch(_){console.error("Error al subir la imagen a Cloudinary:",_),m(!1)}},j=async p=>{if(p.preventDefault(),!a.color||!a.city||!a.contact||!a.type){v.error("Por favor completa todos los campos obligatorios");return}try{x(!0),await q(a),v.success("Reporte enviado con éxito",{duration:3e3}),i(t?{name:"",color:"",size:"",city:"",address:"",contact:"",loss_date:"",description:"",type:"",type_search:"LOST",image_url:null}:{color:"",size:"",city:"",address:"",contact:"",loss_date:"",description:"",type:"",type_search:"FOUND",image_url:null}),m(!1)}catch(r){console.error("Error al enviar el reporte:",r),v.error("Error al enviar el reporte. Por favor intenta de nuevo.")}finally{x(!1)}};return e.jsx("div",{className:o["report-container"],children:e.jsx("div",{className:o.formContainer,children:e.jsxs("form",{onSubmit:j,className:o.form,children:[e.jsxs("div",{className:o.headerForm,children:[e.jsx("h2",{children:"Reportar Mascota"}),e.jsxs("div",{className:o.tabsContainer,children:[e.jsxs("div",{className:t?o.petSelected:o.pet,onClick:()=>l(!0),children:[e.jsx("img",{src:C,alt:"dog draw"})," Perdido"]}),e.jsxs("div",{className:t?o.pet:o.petSelected,onClick:()=>l(!1),children:[e.jsx("img",{src:b,alt:"pet draw"})," Encontrado"]})]})]}),e.jsxs("div",{className:o.mainForm,children:[e.jsxs("div",{className:o.imageSection,children:[d?e.jsx(S,{cloudName:"dlfwgaprv",publicId:a.image_url,width:"100",height:"100",style:{borderRadius:"1rem"}}):null,e.jsxs("div",{className:o.buttonFile,children:[e.jsx("label",{className:d?o.uploaded:"",children:d?"Foto subida":"Subir foto"}),e.jsx("input",{type:"file",id:"petFile",accept:".jpg, .jpeg, .png",name:"image_url",onChange:y})]})]}),e.jsxs("section",{className:o.form_inputs,children:[t&&e.jsx("input",{type:"text",name:"name",placeholder:"Nombre de la mascota",value:a.name||"",onChange:s}),e.jsx("input",{type:"text",name:"color",placeholder:"Color *",value:a.color||"",onChange:s,required:!0}),e.jsxs("div",{className:o.row,children:[e.jsxs("select",{name:"size",value:a.size||"",onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Tamaño *"}),e.jsx("option",{value:"SMALL",children:"Pequeño"}),e.jsx("option",{value:"MEDIUM",children:"Mediano"}),e.jsx("option",{value:"LARGE",children:"Grande"})]}),e.jsxs("select",{name:"type",value:a.type||"",onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Especie *"}),e.jsx("option",{value:"DOG",children:"Perro"}),e.jsx("option",{value:"CAT",children:"Gato"})]})]}),e.jsx("input",{type:"text",name:"city",placeholder:"Departamento *",value:a.city||"",onChange:s,required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Dirección",value:a.address||"",onChange:s}),e.jsxs("div",{className:o.row,children:[e.jsx("input",{type:"text",name:"contact",placeholder:"Contacto (teléfono/email) *",value:a.contact||"",onChange:s,required:!0}),e.jsx("input",{type:"date",name:"loss_date",value:a.loss_date?a.loss_date.split("T")[0]:"",onChange:s})]})]}),e.jsxs("div",{className:o.descriptionSection,children:[e.jsx("h3",{children:"Descripción"}),e.jsx("textarea",{name:"description",cols:"30",rows:"5",placeholder:"Describe características adicionales, comportamiento, etc.",value:a.description||"",onChange:s,maxLength:300}),e.jsx("p",{className:o.charLimit,children:"Máximo 300 caracteres"})]}),e.jsx("button",{type:"submit",className:o.submitButton,disabled:n,children:n?"Enviando...":"Enviar Reporte"})]})]})})})},V=()=>e.jsx(U,{});export{V as default};
